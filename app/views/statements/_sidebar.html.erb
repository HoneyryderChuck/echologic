<% statement_node ||= @statement_node %>

<% url_options = { :controller => statement_node.class.name.underscore.pluralize,
                   :id => statement_node.id } %>

<div id="discuss_sidebar">

  <% unless !statement_node.echoable? || statement_node.new_record? %>

    <% unless current_user && statement_node.supported?(current_user) %>
      <% link_to(url_for(url_options.merge({:action => :echo})),
                 :class => "ajax_put",
                 :id => 'echo_button') do %>
        <span class="not_supported ttLink no_border"
              title="<%= I18n.t('discuss.tooltips.echo') %>">
        </span>
      <% end %>
    <% else %>
      <% link_to(url_for(url_options.merge({:action => :unecho})),
                 :class => "ajax_put",
                 :id => 'echo_button') do %>
        <span class="supported ttLink no_border"
              title="<%= I18n.t('discuss.tooltips.unecho') %>">
        </span>
      <% end %>
    <% end %>
    <br/>

  <span id="new_sibling_statement_button">
    <%= create_new_sibling_statement_button(statement_node) %>
  </span>
  <% end %>

  <% if current_user && current_user.may_delete?(statement_node) -%>
    <br/><br/>
    <%= link_to I18n.t('discuss.statements.delete_link'),
                url_for(statement_node),
                :class => 'admin_action',
                :method => :delete,
                :confirm => I18n.t('discuss.statements.delete_confirmation') %>
  <% end -%>
</div>
