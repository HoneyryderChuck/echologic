<% if defined? @info %>
  info('<%=@info%>') 
<% end %>

/* load new statement to session */
<% if @statement_node.parent %>
  var session_id = '<%= dom_class(@statement_node.parent) %>';
<% else %>
  var session_id = 'roots';
<% end %>
  var session_data =  $('div#statements').data(session_id);
	if (session_data != null) {
		session_data.unshift(<%= @statement_node.id %>);
		$('div#statements').data(session_id, session_data);
	}
	

var class_element = $('#statements .statement:eq(<%= @statement_node.level %>)');

/* Remove all elements from the same class or children class */
removeChildrenStatements(class_element);

/* Close the content of the remaining ones */
collapseStatements();

var statement = "<%= escape_javascript(render :partial => 'statements/show') %>";
replaceOrInsert(class_element, statement);
	
