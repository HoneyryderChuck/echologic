<% statement_node ||= @statement_node %>
<% previous_statement ||= statement_node.parent_node %>
<% klass ||= statement_node.class.name %>
<% label = supporters_number(statement_node) # TODO: THIS LINE TRIGGERS A QUERY!!! WRONG!!! %>
<% has_supporters = (!statement_node.nil? and (statement_node.new_record? or statement_node.ratio(previous_statement,klass) > 1)) %>
<% show_label ||= false %>
<% only_bar ||= false%>

<!-- SUPPORTERS BAR -->
<%= content_tag :span, '', :class => "#{'no_' unless has_supporters}echo_indicator supporters_bar ttLink", 
                           :title => label, 
                           :alt => ((statement_node.new_record? ? 10 : statement_node.ratio(previous_statement,klass) if has_supporters) ) %>

<!-- SUPPORTERS LABEL -->
<%= content_tag(:span, label, :class => "supporters_label", :style => "#{show_label ? '' : 'display:none' }") unless only_bar %>
